+ source config.sh
++ export KUBERNETES_PUBLIC_ADDRESS=10.0.6.100
++ KUBERNETES_PUBLIC_ADDRESS=10.0.6.100
++ export IP_M1=10.0.6.100
++ IP_M1=10.0.6.100
++ export IP_M2=10.0.6.101
++ IP_M2=10.0.6.101
++ export IP_M3=10.0.6.102
++ IP_M3=10.0.6.102
++ export HOST_M1=ubuntu16-k6-master1.kubernetes
++ HOST_M1=ubuntu16-k6-master1.kubernetes
++ export HOST_M2=ubuntu16-k6-master2.kubernetes
++ HOST_M2=ubuntu16-k6-master2.kubernetes
++ export HOST_M3=ubuntu16-k6-master3.kubernetes
++ HOST_M3=ubuntu16-k6-master3.kubernetes
++ export IP_W1=10.0.6.110
++ IP_W1=10.0.6.110
++ export IP_W2=10.0.6.111
++ IP_W2=10.0.6.111
++ export IP_W3=10.0.6.112
++ IP_W3=10.0.6.112
++ export HOST_W1=ubuntu16-k6-node1.kubernetes
++ HOST_W1=ubuntu16-k6-node1.kubernetes
++ export HOST_W2=ubuntu16-k6-node2.kubernetes
++ HOST_W2=ubuntu16-k6-node2.kubernetes
++ export HOST_W3=ubuntu16-k6-node3.kubernetes
++ HOST_W3=ubuntu16-k6-node3.kubernetes
++ export CLUSTER_SERVICE_IP_RANGE=10.5.0.0/24
++ CLUSTER_SERVICE_IP_RANGE=10.5.0.0/24
++ export CLUSTER_CIDR=10.244.0.0/16
++ CLUSTER_CIDR=10.244.0.0/16
++ export CLUSTER_DNS=10.32.0.1
++ CLUSTER_DNS=10.32.0.1
++ export DOWNLOAD_DEPENDENCIES=true
++ DOWNLOAD_DEPENDENCIES=true
++ export CERT_DIR_PATH=certs
++ CERT_DIR_PATH=certs
++ export TOKEN_DIR_PATH=token
++ TOKEN_DIR_PATH=token
++ export CA_DIR_PATH=ca
++ CA_DIR_PATH=ca
++ export CONFIG_DIR_PATH=configs
++ CONFIG_DIR_PATH=configs
+ mkdir -p certs
+ cd certs
+ echo ADMIN CLIENT CERT
ADMIN CLIENT CERT
+ cat
+ cfssl gencert -ca=../ca/ca.pem -ca-key=../ca/ca-key.pem -config=../ca/ca-config.json -profile=kubernetes admin-csr.json
+ cfssljson -bare admin
2017/08/23 16:37:02 [INFO] generate received request
2017/08/23 16:37:02 [INFO] received CSR
2017/08/23 16:37:02 [INFO] generating key: rsa-2048
2017/08/23 16:37:03 [INFO] encoded CSR
2017/08/23 16:37:03 [INFO] signed certificate with serial number 166785317999503765574882416971679652173449893030
2017/08/23 16:37:03 [WARNING] This certificate lacks a "hosts" field. This makes it unsuitable for
websites. For more information see the Baseline Requirements for the Issuance and Management
of Publicly-Trusted Certificates, v.1.1.6, from the CA/Browser Forum (https://cabforum.org);
specifically, section 10.2.3 ("Information Requirements").
KUBE PROXY CERT
+ echo KUBE PROXY CERT
+ cat
+ cfssljson -bare kube-proxy
+ cfssl gencert -ca=../ca/ca.pem -ca-key=../ca/ca-key.pem -config=../ca/ca-config.json -profile=kubernetes kube-proxy-csr.json
2017/08/23 16:37:03 [INFO] generate received request
2017/08/23 16:37:03 [INFO] received CSR
2017/08/23 16:37:03 [INFO] generating key: rsa-2048
2017/08/23 16:37:03 [INFO] encoded CSR
2017/08/23 16:37:03 [INFO] signed certificate with serial number 34504346482714672563280405698977153819026402903
2017/08/23 16:37:03 [WARNING] This certificate lacks a "hosts" field. This makes it unsuitable for
websites. For more information see the Baseline Requirements for the Issuance and Management
of Publicly-Trusted Certificates, v.1.1.6, from the CA/Browser Forum (https://cabforum.org);
specifically, section 10.2.3 ("Information Requirements").
+ echo KUBERNETES SERVER CERT
KUBERNETES SERVER CERT
+ cat
+ cfssl gencert -ca=../ca/ca.pem -ca-key=../ca/ca-key.pem -config=../ca/ca-config.json -profile=kubernetes kubernetes-csr.json
+ cfssljson -bare kubernetes
2017/08/23 16:37:03 [INFO] generate received request
2017/08/23 16:37:03 [INFO] received CSR
2017/08/23 16:37:03 [INFO] generating key: rsa-2048
2017/08/23 16:37:03 [INFO] encoded CSR
2017/08/23 16:37:03 [INFO] signed certificate with serial number 574844552520374344146413778618298184649145963167
2017/08/23 16:37:03 [WARNING] This certificate lacks a "hosts" field. This makes it unsuitable for
websites. For more information see the Baseline Requirements for the Issuance and Management
of Publicly-Trusted Certificates, v.1.1.6, from the CA/Browser Forum (https://cabforum.org);
specifically, section 10.2.3 ("Information Requirements").
